graph TD
    %% --- TANIMLAR ---
    
    %% Trafik KaynaÄŸÄ±
    TrafficSource["<center><b>KullanÄ±cÄ± TrafiÄŸi</b><br>KarÄ±ÅŸÄ±k Ä°stek Havuzu</center>"]

    %% Ä°stek Tipleri (Request Weights)
    subgraph Request_Types [Ä°stek AÄŸÄ±rlÄ±klarÄ± / CPU Maliyeti]
        style Request_Types fill:#e3f2fd,stroke:#1565c0,stroke-dasharray: 5 5
        
        ReqHigh["<center><b>ğŸ”¥ AÄŸÄ±r Ä°stek</b><br>AÄŸÄ±rlÄ±k: 20 Unit<br>(Video Ä°ÅŸleme, DB Yazma)</center>"]
        ReqMid["<center><b>âš¡ Orta Ä°stek</b><br>AÄŸÄ±rlÄ±k: 10 Unit<br>(API Ã‡aÄŸrÄ±sÄ±)</center>"]
        ReqLow["<center><b>ğŸƒ Hafif Ä°stek</b><br>AÄŸÄ±rlÄ±k: 2 Unit<br>(Ping, Statik Dosya)</center>"]
    end

    LB["<center><b>Load Balancer</b><br><i>Ä°stek Maliyetine GÃ¶re DaÄŸÄ±tÄ±m</i><br>Algoritma: Dynamic Capacity Check</center>"]
    
    subgraph Server_Farm [Sunucu Ã‡iftliÄŸi]
        style Server_Farm fill:#f9f9f9,stroke:#333,stroke-width:2px
        
        %% Sunuculardan AÄŸÄ±rlÄ±k parametresi kaldÄ±rÄ±ldÄ±, sadece Kapasite/HÄ±z kaldÄ±
        S1["<center><b>Sunucu 1</b><br>Kapasite: 100 Unit<br>HÄ±z: 1.5x</center>"]
        S2["<center><b>Sunucu 2</b><br>Kapasite: 100 Unit<br>HÄ±z: 1.2x</center>"]
        S3["<center><b>Sunucu 3</b><br>Kapasite: 100 Unit<br>HÄ±z: 1.0x</center>"]
        S4["<center><b>Sunucu 4</b><br>Kapasite: 100 Unit<br>HÄ±z: 0.8x</center>"]
    end

    %% --- BAÄLANTILAR ---
    TrafficSource --> ReqHigh
    TrafficSource --> ReqMid
    TrafficSource --> ReqLow

    %% FarklÄ± kalÄ±nlÄ±kta oklar
    ReqHigh ==>|YÃ¼ksek YÃ¼k| LB
    ReqMid -->|Orta YÃ¼k| LB
    ReqLow -.->|DÃ¼ÅŸÃ¼k YÃ¼k| LB

    LB --> S1
    LB --> S2
    LB --> S3
    LB --> S4

    %% --- STÄ°L ---
    style TrafficSource fill:#eceff1,stroke:#455a64
    style LB fill:#fff9c4,stroke:#fbc02d
    
    %% Request Stilleri
    style ReqHigh fill:#ffcdd2,stroke:#c62828,stroke-width:2px
    style ReqMid fill:#fff3e0,stroke:#ef6c00
    style ReqLow fill:#e8f5e9,stroke:#2e7d32
    
    %% Sunucu Stilleri
    style S1 fill:#dcedc8,stroke:#558b2f
    style S2 fill:#dcedc8,stroke:#558b2f
    style S3 fill:#dcedc8,stroke:#558b2f
    style S4 fill:#dcedc8,stroke:#558b2f